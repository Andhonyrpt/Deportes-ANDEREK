
[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/Usuario/Documents/Deportes-ANDEREK/ecommerce-api[39m

[90mstdout[2m | tests/integration/order_concurrency.test.js
[22m[39m[dotenv@17.2.0] injecting env (6) from .env.test (tip: ÔÜÖ´©Å  write to custom object with { processEnv: myObject })

[90mstdout[2m | tests/integration/order_concurrency.test.js
[22m[39m[dotenv@17.2.0] injecting env (0) from .env (tip: ÔÜÖ´©Å  specify custom .env file path with { path: '/custom/path/.env' })

[90mstdout[2m | tests/integration/order_concurrency.test.js
[22m[39m[dotenv@17.2.0] injecting env (0) from .env (tip: ÔÜÖ´©Å  write to custom object with { processEnv: myObject })

[90mstdout[2m | tests/integration/order_concurrency.test.js
[22m[39mMongoDB is connected

[90mstdout[2m | tests/integration/order_concurrency.test.js[2m > [22m[2mOrder Concurrency & Race Conditions[2m > [22m[2mshould NOT allow over-selling when multiple users buy the last item simultaneously
[22m[39m2026-02-28T01:50:43.958Z | POST | /api/orders

[90mstdout[2m | tests/integration/order_concurrency.test.js[2m > [22m[2mOrder Concurrency & Race Conditions[2m > [22m[2mshould NOT allow over-selling when multiple users buy the last item simultaneously
[22m[39m2026-02-28T01:50:43.973Z | POST | /api/orders

[90mstdout[2m | tests/integration/order_concurrency.test.js[2m > [22m[2mOrder Concurrency & Race Conditions[2m > [22m[2mshould NOT allow over-selling when multiple users buy the last item simultaneously
[22m[39mStatuses: 422,422
Successes: 0, Failures: 2
Final stock: 1

 [31m├ù[39m tests/integration/order_concurrency.test.js[2m > [22mOrder Concurrency & Race Conditions[2m > [22mshould NOT allow over-selling when multiple users buy the last item simultaneously[33m 396[2mms[22m[39m
[31m   ÔåÆ Overselling detected! Both orders succeeded but only 1 item was in stock.: expected +0 to be 1 // Object.is equality[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m   Start at [22m 19:50:41
[2m   Duration [22m 2.72s[2m (transform 421ms, setup 832ms, import 1.15s, tests 408ms, environment 0ms)[22m

